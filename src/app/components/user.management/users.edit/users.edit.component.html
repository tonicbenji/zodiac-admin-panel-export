<div class="page-header">
    <h1 mat-dialog-title *ngIf="id > 0"><i class="fa fa-cubes page-header-icon"></i>Edit User</h1>
    <h1 mat-dialog-title *ngIf="id == 'new'"><i class="fa fa-cubes page-header-icon"></i>Add User</h1>
</div>
<section class="container-fluid with-maxwidth chapter" *ngIf="record">
    <article class="article">
        <div class="box box-default">
            <form *ngIf="userForm" [formGroup]="userForm">
                <div class="col-xs-12 col-md-12">
                    <div class="row">
                        <div class="col-xs-12 col-md-6">
                            <p>
                                <mat-form-field appearance="standard">
                                    <mat-label>First Name</mat-label>
                                    <input matInput formControlName="first_name" [(ngModel)]="record.first_name" placeholder="First Name">
                                    <mat-error *ngIf="userForm.get('first_name').hasError('server_validation')">{{ userForm.get('first_name').getError('server_validation') }}</mat-error>
                                </mat-form-field>
                            </p>
                        </div>
                        <div class="col-xs-12 col-md-6">
                            <p>
                                <mat-form-field appearance="standard">
                                    <mat-label>Last Name</mat-label>
                                    <input matInput formControlName="last_name" [(ngModel)]="record.last_name" placeholder="Last Name">
                                    <mat-error *ngIf="userForm.get('last_name').hasError('server_validation')">{{ userForm.get('last_name').getError('server_validation') }}</mat-error>
                                </mat-form-field>
                            </p>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-xs-12 col-md-6">
                            <p>
                                <mat-form-field appearance="standard">
                                    <mat-label>Email</mat-label>
                                    <input matInput formControlName="email" [(ngModel)]="record.email" placeholder="Email">
                                    <mat-error *ngIf="userForm.get('email').hasError('server_validation')">{{ userForm.get('email').getError('server_validation') }}</mat-error>
                                </mat-form-field>
                            </p>
                        </div>
                    </div>
                    <div class="row">
                        <button type="button" 
                            *ngIf="id > 0 && (!record || record.can_update_password == 0)"
                            mat-raised-button 
                            color="primary" 
                            class="btn-w-md" 
                            (click)="sendPasswordResetLink()" 
                            [disabled]="alertService.networkActivity" 
                            style="margin:10px">
                            Send Password Link
                        </button>
                        <button type="button" 
                            *ngIf="id > 0 && record && record.can_update_password == 1"
                            mat-raised-button color="primary" 
                            class="btn-w-md" 
                            (click)="openDialog()" 
                            [disabled]="alertService.networkActivity" 
                            style="margin:10px">
                            Update Password
                        </button>
                    </div>
                    <div class="row">
                        <div class="col-xs-12 col-md-6">
                            <div class="text-success" *ngIf="flash.success">{{flash.success}}</div>
                            <div class="text-danger" *ngIf="flash.error">{{flash.error}}</div>
                        </div>
                    </div>
                </div>
            </form>
            <button type="button" mat-raised-button color="warn" class="btn-w-md pull-right" (click)="cancel()" style="margin:10px">
                Cancel
            </button>
            <button type="button" mat-raised-button color="primary" class="btn-w-md pull-right" (click)="save()" [disabled]="alertService.networkActivity" style="margin:10px">
                Save page
            </button>
        </div>
    </article>
</section>
        